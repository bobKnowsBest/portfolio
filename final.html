
<!DOCTYPE html>
<html>
<head>
   
<title>Weather App</title>


<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="http://js.arcgis.com/3.7/"></script>

<link rel="stylesheet" href="http://js.arcgis.com/3.7/js/esri/css/esri.css">
<link rel="stylesheet" href="bmTog.css"> 
<link rel="stylesheet" href="myCSS.css"> 	
  

<script>
       var map, dialog1, dialog, locator, i=0;
		myArray = [];
   
$( document ).ready(function() {
	var city = '';
	$("#get").click(function() {
		city = $("#city").val(); 
		
		
		getWeather(function (data) {
			displayData = "";
			displayData = "<strong>"+data.name+":</strong> "+data.weather[0].description+"<br>"+"<strong>Temperature</strong>"+data.main.temp+"&deg;F<br>";
			$( "#leftContainer3" ).empty().append( displayData );});
				
	
	
	function getWeather(callback) {
		//console.log(city);
		var weather = 'http://api.openweathermap.org/data/2.5/weather?q='+city+'&mode=json&units=imperial&APPID=b452c2adfadb2555d299e848a6ed2c78';
		$.ajax({dataType: "jsonp",url: weather,success: callback});
	}
	//var forecast = 'http://api.openweathermap.org/data/2.5/forecast/daily/?q='+city+'&mode=json&appid=b452c2adfadb2555d299e848a6ed2c78';
	
})
});

 
      require([
        "esri/map", "esri/dijit/BasemapToggle", "esri/layers/WebTiledLayer","esri/renderers/SimpleRenderer","dojo/dom-style", 
     "dojo/dom", "dojo/domReady!"
      ], function(
        Map, BasemapToggle, WebTiledLayer, parser, dom
      ) 
	  
	  { 
		map = new Map("map", { basemap: "national-geographic",center: [-107.876175,38.478321],scaleControl: true,zoom: 5});
		myArray.push(map);	

		var toggle = new BasemapToggle({map: map,basemap: "hybrid"}, "leftContainer2");
		toggle.startup();
		
		var subs = [ "mesonet", "mesonet1", "mesonet2", "mesonet3" ];
		 var nexrad = new esri.layers.WebTiledLayer("http://${subDomain}.agron.iastate.edu/cache/tile.py/1.0.0/nexrad-n0q-900913/${level}/${col}/${row}.png", {
            id: "nexrad",subDomains: subs});
			myArray.push(nexrad);
		
		map.infoWindow.resize(245,125);
		map.setMinScale(5);
        
        dialog = new TooltipDialog({id: "tooltipDialog",style: "position: absolute; width: 250px; font: normal normal normal 10pt Helvetica;z-index:100"});
        dialog.startup();
        
      	// "dual" displays both miles and kilmometers
        // "english" is the default, which displays miles
        // use "metric" for kilometers
		var scalebar = new Scalebar({map: map,scalebarUnit: "dual"});
        
		map.infoWindow.resize(200,125);

       
      }
	 
	 
	  )
	  
	  <!--document.getElementById('chartdiv').style.height = "200px"
	    function myFun1(rain){
        if(i%2 == 0){myArray[0].addLayer(myArray[1]); 
		
		/*document.getElementById("legend").style.visibility = "visible";
		document.getElementById("snowT").style.visibility = "visible";document.getElementById("rainSnowT").style.visibility = "visible";
		document.getElementById("rainT").style.visibility = "visible";document.getElementById("snow").style.visibility = "visible";
		document.getElementById("rainSnow").style.visibility = "visible";document.getElementById("rain").style.visibility = "visible";*/
		
		};
		
		
		if(i%2 !=0){myArray[0].removeLayer(myArray[1]);
		/*document.getElementById("legend").style.visibility = "hidden";
		document.getElementById("rainSnow").style.visibility = "hidden";document.getElementById("rain").style.visibility = "hidden";
		document.getElementById("snow").style.visibility = "hidden";document.getElementById("rainT").style.visibility = "hidden";
		document.getElementById("rainSnowT").style.visibility = "hidden";document.getElementById("snowT").style.visibility = "hidden";*/
		};
		i = i + 1;
						} 
	 
	  
	  
	  
	
	  
    </script>


</head>
<body>
<div id="header"><strong><font color="black"> <h1> <center>WEATHER APPLICATION</center></h1> </font></strong>
</div>


<div id="map" data-dojo-type="dijit/layout/ContentPane" data-dojo-props="region:'center'"></div>
        
<div id="leftContainer" >
     <br><br><center><b>Switch Maps</b>
						<div id="leftContainer2" ></div>
			
			<br><br><br><br><br><br><br><br>
			
	<input type="checkbox" name="radar" onclick="myFun1()"value="Bike">Click for Doppler Radar<br></center>
	
	<center> <br><br><b>Weather Update!</b><br>
		<input type="text" id="city" value="Enter a City" style="max-width:90%;">
		<input type="submit" id="get" value="Get Weather" style="max-width:99%;"><div id="leftContainer3" ></div>
  </center> 
    
    
	<center><br><b><p id="legend" style="visibility:visible">Legend</p>
		<b><p id="rainT" >Rain</p></b><img src="rain.png" id="rain" alt="rain" width="150" height="20" align="center"><br>
		<b><p id="rainSnowT" >Rain Snow Mix</p></b><img src="rainSnow.png" id="rainSnow" alt="rainSnow" width="150" height="20" align="center"><br>
		<b><p id="snowT">Snow</p></b><img src="snow.png" id="snow" alt="snow" width="150" height="20" align="center" ></center>
	
	<br>
</div>
	
    
        
    <div id="footer"><center>Last Updated January 28, 2017!</center></div> 
    

</body>
</html>
